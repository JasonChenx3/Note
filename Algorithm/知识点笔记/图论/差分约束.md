### 差分约束



#### 1. 求不等式组的可行解

源点需要满足的条件：从源点出发，一定可以走到所有的边。

一般步骤：

1. 先将每个不等式 $x_i\le x_j + c_k$ ，转换成一条从 $x_j$ 走到 $x_i$ 的长度为 $c_k$ 的一条边。

2. 找到一个超级源点，使得该源点一定可以遍历到所有==边==。

3. 从源点求一遍单源最短路。

   ​	结果1：如果存在负环，则原不等式组一定无解。

   ​	结果2：如果没有负环，则 $dist[i]$ 就是原不等式组的一个可行解。



#### 2. 如何求最大值或者最小值

结论：如果求的是最小值，则应该求最长路；如果求的是最大值，则应该求最短路。



问题1：如何转化 $x_i<=c$ ，这类不等式？

方法：建立一个超级源点 $0$ ，然后建立从 $0$ 到 $i$ ，长度为 $c$ 的一条边。   



以求 $x_i$ 的最大值为例：

所有从 $x_i$ 出发，构成的不等式链 $x_i \le x_j+c_1 \le x_k+c_2+c_1 \le ... \le c_1+...+c_k$ 所计算出的上界，最终 $x_i$ 的最大值等于所有上界的最小值。